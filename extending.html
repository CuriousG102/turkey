<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Contributing and Extending &#8212; Turkey 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Turkey 0.1 documentation" href="index.html" />
    <link rel="prev" title="Using Data" href="data.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="contributing-and-extending">
<h1>Contributing and Extending<a class="headerlink" href="#contributing-and-extending" title="Permalink to this headline">¶</a></h1>
<p>MmmTurkey was designed to be modular with the ability to easily add new steps and auditors. If you would like to share your custom steps and auditors and add them to the MmmTurkey project, please feel free to submit a <a class="reference external" href="https://github.com/CuriousG102/turkey/pulls">pull request</a>. Other ways to contribute include writing unit tests and helping out with the docs.</p>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<p>If you think of your HIT as a test, then a &#8220;step&#8221; is an individual question in your test. You can add as many steps as you would like to your task, and you can choose to have them ordered or unordered (randomized). The same applies to the response options of each step, if applicable. Writing your own steps will involve several steps. You will need to add Python code, generate migrations, and have associated Python, HTML, and JavaScript.</p>
<div class="section" id="python">
<h3>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h3>
<p>Add your step to the dictionary <code class="docutils literal"><span class="pre">NAME_TO_STEP</span></code> at the top of the file. You will need to write two classes, one for the step&#8217;s data and one for the step itself. The data class will have a &#8220;general_models&#8221; field with the foreign key being the name of your step and a &#8220;response&#8221; field specifying the type of response your database should expect to receive (int, text, etc). The step class has a &#8220;script_location&#8221; field, a &#8220;template_file&#8221; location field, a &#8220;data_model&#8221; field (which is simply the data class you just wrote), and some metadata fields specific to an instance of this step such as &#8220;title&#8221; and &#8220;text&#8221; (question text). Fields in this class will affect how the process of adding this step will appear on the admin site. Note that a step&#8217;s fields can be accessed in a template with step_instance.attribute; this can be helpful when filling out HTML element fields.</p>
</div>
<div class="section" id="javascript">
<h3>JavaScript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h3>
<p>Scripts are located in <code class="docutils literal"><span class="pre">turkey/web/turkey/survey/static/survey/js/</span></code>. Create an object with a <code class="docutils literal"><span class="pre">submit_callable</span></code> function that returns an object. This object should get the responses of every instance of this specific step type, and each instance&#8217;s response should be paired with its primary key in the return object. jQuery should be extremely helpful in extracting the responses of a step instance. After writing this object, be sure to register your step to the &#8220;SubmissionHandler&#8221; object in <code class="docutils literal"><span class="pre">submission_handler.js</span></code>, which handles the submission of results and all auditor data when the submit button is clicked.</p>
</div>
</div>
<div class="section" id="auditors">
<h2>Auditors<a class="headerlink" href="#auditors" title="Permalink to this headline">¶</a></h2>
<p>Inspired by the <a class="reference external" href="http://jeffrz.com/wp-content/uploads/2010/08/fp359-rzeszotarski.pdf">work</a> of Jeff Rzeszotarski and Aniket Kittur, the framework provides &#8220;auditor&#8221; objects that record a worker&#8217;s interactions with a task from the moment they start until they submit their responses or close out of the page. Auditor data can be used to analyze worker behavior and estimate the quality of responses. Doing this can potentially help identify bad response data or observe a behavioral pattern amongst workers. Auditors are written in JavaScript and primarily make use of jQuery events to detect browser interactions. Auditor code can be found in <code class="docutils literal"><span class="pre">.../js/auditors</span></code>. As with steps, writing auditors consists of several steps.</p>
<div class="section" id="id1">
<h3>JavaScript<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Auditors generally have the same format, and referencing the default auditors can be helpful when trying to write your own. Create a JavaScript auditor object (<code class="docutils literal"><span class="pre">.../js/auditors/</span></code>) with your needed fields, a function that modifies those fields, and a function to submit those fields. The modifier function is the action that should be executed when your auditor detects a certain interaction. The submission function (<code class="docutils literal"><span class="pre">submit_callable</span></code>) must return a JavaScript object or array of JavaScript objects. The fields can have the value of a single value (int, string, etc). Be sure to register your auditor to the &#8220;SubmissionHandler&#8221; object (<code class="docutils literal"><span class="pre">.../js/submission_handler.js</span></code>), which handles the submission of results and all auditor data when the submit button is clicked.</p>
</div>
<div class="section" id="id2">
<h3>Python<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>Similarly to the JavaScript side, the Python code (<code class="docutils literal"><span class="pre">.../survey/auditors.py</span></code>) across all auditors is rather similar and should be helpful when writing the models for your auditor. Firstly, add your auditor to the &#8220;NAME_TO_AUDITOR&#8221; dictionary at the top. You will then need to write a class for your auditor&#8217;s data and for the auditor itself. The data class will have a &#8220;general_models&#8221; field with the foreign key being the name of your auditor and a field corresponding to each item specified in the auditor&#8217;s returned object. For instance, if your auditor returned { &#8216;count&#8217;: some_int_var }, this class must have a &#8220;count&#8221; field that accepts data of type int. The actual auditor class has a &#8220;script_location&#8221; field, which is the directory and name of your auditor file, and a &#8220;data_model&#8221; field, which is simply the data class you just wrote.</p>
</div>
<div class="section" id="wrapping-it-up">
<h3>Wrapping it Up<a class="headerlink" href="#wrapping-it-up" title="Permalink to this headline">¶</a></h3>
<p>If the JavaScript and Python parts are implemented correctly, then your auditor should be able to save its data to the database correctly and without problems. You should be able to see and add your auditor to any new tasks you create, but be sure to test your code before publishing the task. It additionally might be helpful to write some unit tests for the auditor.</p>
</div>
</div>
<div class="section" id="documentation">
<h2>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h2>
<p>To add to or edit existing documentation, <code class="docutils literal"><span class="pre">git</span> <span class="pre">checkout</span></code> the <code class="docutils literal"><span class="pre">sphinx</span></code> branch. Make sure that your virtual environment is active. Source files are located in <code class="docutils literal"><span class="pre">turkey/web/turkey/docs/source</span></code>. A <code class="docutils literal"><span class="pre">Makefile</span></code> is provided for convenience in the <code class="docutils literal"><span class="pre">docs</span></code> directory. To generate HTML files, simply run <code class="docutils literal"><span class="pre">make</span> <span class="pre">html</span></code> in the <code class="docutils literal"><span class="pre">docs</span></code> directory, and the build files will be located in <code class="docutils literal"><span class="pre">build/html</span></code>. When you are finished working on documentation, you can make a <a class="reference external" href="https://github.com/CuriousG102/turkey/pulls">pull request</a> to the <code class="docutils literal"><span class="pre">sphinx</span></code> branch (not <code class="docutils literal"><span class="pre">master</span></code>!).</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Contributing and Extending</a><ul>
<li><a class="reference internal" href="#steps">Steps</a><ul>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#javascript">JavaScript</a></li>
</ul>
</li>
<li><a class="reference internal" href="#auditors">Auditors</a><ul>
<li><a class="reference internal" href="#id1">JavaScript</a></li>
<li><a class="reference internal" href="#id2">Python</a></li>
<li><a class="reference internal" href="#wrapping-it-up">Wrapping it Up</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="data.html" title="previous chapter">Using Data</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/extending.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Miles R Hutson and Brandon Dang.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/extending.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
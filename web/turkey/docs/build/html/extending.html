<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Writing Your Own Steps and Auditors &#8212; Turkey 0.1 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Turkey 0.1 documentation" href="index.html" />
    <link rel="prev" title="Using Data" href="data.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="writing-your-own-steps-and-auditors">
<h1>Writing Your Own Steps and Auditors<a class="headerlink" href="#writing-your-own-steps-and-auditors" title="Permalink to this headline">¶</a></h1>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<p>If you think of your HIT as a test, then a &#8220;step&#8221; is an individual question in your test. You can add as many
steps as you would like to your task, and you can choose to have them ordered or unordered (randomized). The
same applies to the response options of each step, if applicable.]</p>
<div class="section" id="currently-included-steps">
<h3>Currently Included Steps<a class="headerlink" href="#currently-included-steps" title="Permalink to this headline">¶</a></h3>
<div class="section" id="multiple-answer">
<h4>Multiple Answer<a class="headerlink" href="#multiple-answer" title="Permalink to this headline">¶</a></h4>
<p>Checkbox questions that allows the worker to select several answers.</p>
</div>
<div class="section" id="multiple-choice">
<h4>Multiple Choice<a class="headerlink" href="#multiple-choice" title="Permalink to this headline">¶</a></h4>
<p>Classic multiple choice question that restricts the worker to selecting only one answer.</p>
</div>
<div class="section" id="text-input">
<h4>Text Input<a class="headerlink" href="#text-input" title="Permalink to this headline">¶</a></h4>
<p>Question that requires the worker to typing a response.</p>
</div>
</div>
<div class="section" id="writing-your-own">
<h3>Writing Your Own<a class="headerlink" href="#writing-your-own" title="Permalink to this headline">¶</a></h3>
<p>Writing your own steps will involve several steps. You will need to add Python code, generate migrations, and have
associated Python, HTML, and Javascript .. TODO Have a full walkthrough</p>
<div class="section" id="python">
<h4>Python<a class="headerlink" href="#python" title="Permalink to this headline">¶</a></h4>
<p>Models for steps are in</p>
<p>Add your step to the dictionary <cite>NAME_TO_STEP</cite> at the top of the file. You will need to write two classes,
one for the step&#8217;s data and one for the step itself. The data class will have a &#8220;general_models&#8221; field with
the foreign key being the name of your step and a &#8220;response&#8221; field specifying the type of response your database
should expect to receive (int, text, etc). The step class has a &#8220;script_location&#8221; field, a &#8220;template_file&#8221;
location field, a &#8220;data_model&#8221; field (which is simply the data class you just wrote), and some metadata fields
specific to an instance of this step such as &#8220;title&#8221; and &#8220;text&#8221; (question text). Fields in this class will affect
how the process of adding this step will appear on the admin site. Note that a step&#8217;s fields can be accessed in a
template with step_instance.attribute; this can be helpful when filling out HTML element fields.Sp</p>
</div>
<div class="section" id="javascript">
<h4>Javascript<a class="headerlink" href="#javascript" title="Permalink to this headline">¶</a></h4>
<p>Scripts are located in (.../js/steps/). Create an object with a <cite>submit_callable</cite> function that returns an object.
This object should get the responses of every instance of this specific step type, and each instance&#8217;s response
should be paired with its primary key in the return object. jQuery should be extremely helpful in extracting the
responses of a step instance. After writing this object, be sure to register your step to the &#8220;overlord&#8221; object
(.../js/submission_handler.js), which handles the submission of results and all auditor data when the submit button
is clicked.</p>
</div>
</div>
</div>
<div class="section" id="auditors">
<h2>Auditors<a class="headerlink" href="#auditors" title="Permalink to this headline">¶</a></h2>
<p>Models for auditors are in</p>
<p>Inspired by the work of
<a class="reference external" href="http://jeffrz.com/wp-content/uploads/2010/08/fp359-rzeszotarski.pdf">Jeff Rzeszotarski and Aniket Kittur</a>, the
framework provides auditors objects that record a worker&#8217;s interactions with a task from the moment they start until
they submits their responses or closes out of the page. Auditor data can be used to analyze the merit of a worker
and estimate the quality of their responses. Doing this can help filter out bad response data and potentially identify
workers who repeatedly provide poor quality work as well as detect a pattern amongst workers with varying levels of
work ethic. Auditors are written in JavaScript (.../js/auditors/) and primarily make use of jQuery events to detect
browser interactions.</p>
<div class="section" id="currently-included-auditors">
<h3>Currently Included Auditors<a class="headerlink" href="#currently-included-auditors" title="Permalink to this headline">¶</a></h3>
<div class="section" id="focus-based-auditors">
<h4>Focus Based Auditors<a class="headerlink" href="#focus-based-auditors" title="Permalink to this headline">¶</a></h4>
<p>Auditors recording whether the worker is on or off focus. A worker is considered on focus if the task page is &#8220;visible&#8221;.
The page is visible if it is not tabbed out, minimized, or closed. Primarily makes use of the Page Visibility API
(.../js/globals/visbility_changes) to detect changes in focus.</p>
</div>
<div class="section" id="focus-changes">
<h4>Focus Changes<a class="headerlink" href="#focus-changes" title="Permalink to this headline">¶</a></h4>
<p>Timestamps of whenever the worker switches out of focus (tabs out, minimizes, etc).</p>
</div>
<div class="section" id="on-focus-time">
<h4>On Focus Time<a class="headerlink" href="#on-focus-time" title="Permalink to this headline">¶</a></h4>
<p>The total amount of time in milliseconds the worker spent on focus (not tabbed out, etc).</p>
</div>
<div class="section" id="recorded-time-disparity">
<h4>Recorded Time Disparity<a class="headerlink" href="#recorded-time-disparity" title="Permalink to this headline">¶</a></h4>
<p>The total amount of time in milliseconds the worker spent off focus (tabbed out, etc). Also a Time Based Auditor</p>
</div>
<div class="section" id="keyboard-based-auditors">
<h4>Keyboard Based Auditors<a class="headerlink" href="#keyboard-based-auditors" title="Permalink to this headline">¶</a></h4>
<p>Auditors recording typing interactions. Makes use of jQuery keyboard events.</p>
</div>
<div class="section" id="before-typing-delay">
<h4>Before Typing Delay<a class="headerlink" href="#before-typing-delay" title="Permalink to this headline">¶</a></h4>
<p>Total time in milliseconds before a worker types; can be null.</p>
</div>
<div class="section" id="keypresses-total">
<h4>Keypresses Total<a class="headerlink" href="#keypresses-total" title="Permalink to this headline">¶</a></h4>
<p>Total number of keypresses</p>
</div>
<div class="section" id="keypresses-specific">
<h4>Keypresses Specific<a class="headerlink" href="#keypresses-specific" title="Permalink to this headline">¶</a></h4>
<p>Keycode of the key that was pressed.</p>
</div>
<div class="section" id="within-typing-delay">
<h4>Within Typing Delay<a class="headerlink" href="#within-typing-delay" title="Permalink to this headline">¶</a></h4>
<p>Checks if the worker typed within the first 10 (default) seconds of the task. Returns &#8220;true&#8221; if so, &#8220;false&#8221; if not.</p>
</div>
<div class="section" id="mouse-based-auditors">
<h4>Mouse Based Auditors<a class="headerlink" href="#mouse-based-auditors" title="Permalink to this headline">¶</a></h4>
<p>Auditors recording mouse interactions. Makes use of jQuery&#8217;s mousemove and click events.</p>
</div>
<div class="section" id="clicks-total">
<h4>Clicks Total<a class="headerlink" href="#clicks-total" title="Permalink to this headline">¶</a></h4>
<p>Total number of times the worker clicks.</p>
</div>
<div class="section" id="clicks-specific">
<h4>Clicks Specific<a class="headerlink" href="#clicks-specific" title="Permalink to this headline">¶</a></h4>
<p>The DOM element clicked by the worker. Reports the DOM type, id, class, and name.</p>
</div>
<div class="section" id="mouse-movement-total">
<h4>Mouse Movement Total<a class="headerlink" href="#mouse-movement-total" title="Permalink to this headline">¶</a></h4>
<p>Total number of times the worker moves his mouse, debounced.</p>
</div>
<div class="section" id="mouse-movement-specific">
<h4>Mouse Movement Specific<a class="headerlink" href="#mouse-movement-specific" title="Permalink to this headline">¶</a></h4>
<p>Ending position of the cursor after the worker moves his mouse, debounced.</p>
</div>
<div class="section" id="scroll-base-auditors">
<h4>Scroll Base Auditors<a class="headerlink" href="#scroll-base-auditors" title="Permalink to this headline">¶</a></h4>
<p>Auditors recording scrolling events. Makes use of jQuery&#8217;s scroll event and the jQuery debounce plugin
(.../js/globals/jquery.ba-throttle-debounce.min.js).</p>
</div>
<div class="section" id="scrolled-pixels-total">
<h4>Scrolled Pixels Total<a class="headerlink" href="#scrolled-pixels-total" title="Permalink to this headline">¶</a></h4>
<p>The total number of pixels scrolled by the worker. Returns both the vertical count and horizontal count. Debounced.</p>
</div>
<div class="section" id="scrolled-pixels-specific">
<h4>Scrolled Pixels Specific<a class="headerlink" href="#scrolled-pixels-specific" title="Permalink to this headline">¶</a></h4>
<p>For each scrolling event, reports the end position, the raw change in pixels from the previous position, and the
timestamp of the event. Records data for both horizontal and vertical scrolling. Debounced.</p>
</div>
<div class="section" id="time-based-auditors">
<h4>Time Based Auditors<a class="headerlink" href="#time-based-auditors" title="Permalink to this headline">¶</a></h4>
<p>Auditors recording the time spent completing the task.</p>
</div>
<div class="section" id="total-task-time">
<h4>Total Task Time<a class="headerlink" href="#total-task-time" title="Permalink to this headline">¶</a></h4>
<p>The total time it takes the worker to complete this task in milliseconds.</p>
</div>
<div class="section" id="id1">
<h4>Recorded Time Disparity<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<p>The total amount of time in milliseconds the worker spent off focus (tabbed out, etc). Also a Focus Based Auditor</p>
</div>
<div class="section" id="other-auditors">
<h4>Other Auditors<a class="headerlink" href="#other-auditors" title="Permalink to this headline">¶</a></h4>
<p>Pasting events and User Agent spying.</p>
</div>
<div class="section" id="pastes-total">
<h4>Pastes Total<a class="headerlink" href="#pastes-total" title="Permalink to this headline">¶</a></h4>
<p>Total number of pastes actions.</p>
</div>
<div class="section" id="pastes-specific">
<h4>Pastes Specific<a class="headerlink" href="#pastes-specific" title="Permalink to this headline">¶</a></h4>
<p>The content (text) of a paste action.</p>
</div>
<div class="section" id="user-agent">
<h4>User Agent<a class="headerlink" href="#user-agent" title="Permalink to this headline">¶</a></h4>
<p>Returns the User Agent of the worker; can be parsed to find browser/version and operating system/version.</p>
</div>
</div>
<div class="section" id="id2">
<h3>Writing Your Own<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="section" id="javascript-the-actual-auditor">
<h4>Javascript: The Actual Auditor<a class="headerlink" href="#javascript-the-actual-auditor" title="Permalink to this headline">¶</a></h4>
<p>Auditors generally have the same format, and referencing the default auditors can be helpful when trying
to write your own. Create a JavaScript auditor object (.../js/auditors/) with your needed fields, a function that
modifies those fields, and a function to submit those fields. The modifier function is the action that should be
executed when your auditor detects a certain interaction. The submission function (&#8220;submit_callable&#8221;) must return a
JavaScript object or array of JavaScript objects. The fields can have the value of a single value (int, string, etc).
Be sure to register your auditor to the &#8220;overlord&#8221; object (.../js/submission_handler.js), which handles the submission
of results and all auditor data when the submit button is clicked.</p>
</div>
<div class="section" id="python-the-auditor-s-models">
<h4>Python: The Auditor&#8217;s Models<a class="headerlink" href="#python-the-auditor-s-models" title="Permalink to this headline">¶</a></h4>
<p>Similarly to the JavaScript side, the Python code (.../survey/auditors.py) across all auditors is rather similar and
should be helpful when writing the models for your auditor. Firstly, add your auditor to the &#8220;NAME_TO_AUDITOR&#8221;
dictionary at the top. You will then need to write a class for your auditor&#8217;s data and for the auditor itself.
The data class will have a &#8220;general_models&#8221; field with the foreign key being the name of your auditor and a field
corresponding to each item specified in the auditor&#8217;s returned object. For instance, if your auditor returned
{ &#8216;count&#8217;: some_int_var }, this class must have a &#8220;count&#8221; field that accepts data of type int. The actual auditor class
has a &#8220;script_location&#8221; field, which is the directory and name of your auditor file, and a &#8220;data_model&#8221; field, which is
simply the data class you just wrote.</p>
</div>
<div class="section" id="wrapping-it-up">
<h4>Wrapping it Up<a class="headerlink" href="#wrapping-it-up" title="Permalink to this headline">¶</a></h4>
<p>If the JavaScript and Python parts were implemented correctly, then your auditor should be able to save its data to the
database correctly and without problems. You should be able to see and add your auditor to any new tasks you create, but
be sure to test your code before publishing the HIT.</p>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Writing Your Own Steps and Auditors</a><ul>
<li><a class="reference internal" href="#steps">Steps</a><ul>
<li><a class="reference internal" href="#currently-included-steps">Currently Included Steps</a><ul>
<li><a class="reference internal" href="#multiple-answer">Multiple Answer</a></li>
<li><a class="reference internal" href="#multiple-choice">Multiple Choice</a></li>
<li><a class="reference internal" href="#text-input">Text Input</a></li>
</ul>
</li>
<li><a class="reference internal" href="#writing-your-own">Writing Your Own</a><ul>
<li><a class="reference internal" href="#python">Python</a></li>
<li><a class="reference internal" href="#javascript">Javascript</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#auditors">Auditors</a><ul>
<li><a class="reference internal" href="#currently-included-auditors">Currently Included Auditors</a><ul>
<li><a class="reference internal" href="#focus-based-auditors">Focus Based Auditors</a></li>
<li><a class="reference internal" href="#focus-changes">Focus Changes</a></li>
<li><a class="reference internal" href="#on-focus-time">On Focus Time</a></li>
<li><a class="reference internal" href="#recorded-time-disparity">Recorded Time Disparity</a></li>
<li><a class="reference internal" href="#keyboard-based-auditors">Keyboard Based Auditors</a></li>
<li><a class="reference internal" href="#before-typing-delay">Before Typing Delay</a></li>
<li><a class="reference internal" href="#keypresses-total">Keypresses Total</a></li>
<li><a class="reference internal" href="#keypresses-specific">Keypresses Specific</a></li>
<li><a class="reference internal" href="#within-typing-delay">Within Typing Delay</a></li>
<li><a class="reference internal" href="#mouse-based-auditors">Mouse Based Auditors</a></li>
<li><a class="reference internal" href="#clicks-total">Clicks Total</a></li>
<li><a class="reference internal" href="#clicks-specific">Clicks Specific</a></li>
<li><a class="reference internal" href="#mouse-movement-total">Mouse Movement Total</a></li>
<li><a class="reference internal" href="#mouse-movement-specific">Mouse Movement Specific</a></li>
<li><a class="reference internal" href="#scroll-base-auditors">Scroll Base Auditors</a></li>
<li><a class="reference internal" href="#scrolled-pixels-total">Scrolled Pixels Total</a></li>
<li><a class="reference internal" href="#scrolled-pixels-specific">Scrolled Pixels Specific</a></li>
<li><a class="reference internal" href="#time-based-auditors">Time Based Auditors</a></li>
<li><a class="reference internal" href="#total-task-time">Total Task Time</a></li>
<li><a class="reference internal" href="#id1">Recorded Time Disparity</a></li>
<li><a class="reference internal" href="#other-auditors">Other Auditors</a></li>
<li><a class="reference internal" href="#pastes-total">Pastes Total</a></li>
<li><a class="reference internal" href="#pastes-specific">Pastes Specific</a></li>
<li><a class="reference internal" href="#user-agent">User Agent</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id2">Writing Your Own</a><ul>
<li><a class="reference internal" href="#javascript-the-actual-auditor">Javascript: The Actual Auditor</a></li>
<li><a class="reference internal" href="#python-the-auditor-s-models">Python: The Auditor&#8217;s Models</a></li>
<li><a class="reference internal" href="#wrapping-it-up">Wrapping it Up</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="data.html" title="previous chapter">Using Data</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/extending.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Miles R Hutson and Brandon U Dặng.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.8</a>
      
      |
      <a href="_sources/extending.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>